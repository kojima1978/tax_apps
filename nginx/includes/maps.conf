# ============================================
# WebSocket Upgrade Map
# ============================================
map $http_upgrade $connection_upgrade {
    default upgrade;
    '' '';
}

# ============================================
# Next.js Font Routing (Turbopack dev mode)
# ============================================
map $http_referer $nextjs_font_backend {
    default portal;
    ~*/tax-docs/ tax-docs-frontend;
    ~*/itcm/ itcm-frontend;
    ~*/medical/ medical-stock-valuation;
    ~*/inheritance-tax-docs/ inheritance-tax-docs;
    ~*/gift-tax-simulator/ gift-tax-simulator;
    ~*/gift-tax-docs/ gift-tax-docs;
    ~*/retirement-tax-calc/ retirement-tax-calc;
}
