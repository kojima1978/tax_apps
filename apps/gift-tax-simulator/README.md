# 贈与税 比較Webアプリ

贈与税の税額をシミュレーションし、一括贈与と分割贈与を比較するWebアプリケーションです。

## 機能

### シミュレーター（メインページ）
- 贈与金額に対する税額計算
- 一般贈与・特例贈与の切り替え
- 一括贈与 / 2年分割 / 4年分割の比較
- 実効税率の表示
- グラフによる視覚的な比較
- A4印刷対応

### 早見表ページ
- 100万円単位の税額早見表
- 特例贈与・一般贈与を縦並びで表示
- 表示上限の切り替え（1,000万円〜3,000万円）
- A3印刷対応

### 共通機能
- 印刷用フッター（会社情報・担当者・作成日）
- レスポンシブデザイン

## 技術スタック

| カテゴリ | 技術 |
|---------|------|
| Framework | Next.js 16 (App Router) |
| Language | TypeScript |
| UI | React 19 |
| Chart | Chart.js + react-chartjs-2 |
| Styling | Tailwind CSS 4 |
| Container | Docker + Docker Compose |

## 開発環境のセットアップ

### Docker（推奨）

```bash
# 起動
docker compose up -d

# 再ビルドして起動
docker compose up -d --build

# ログ確認
docker compose logs -f

# 停止
docker compose down
```

### ローカル

```bash
npm install
npm run dev
```

## アクセス

| 環境 | URL |
|------|-----|
| シミュレーター | http://localhost:3001/gift-tax-simulator/ |
| 早見表 | http://localhost:3001/gift-tax-simulator/table |

> **Note**: 中央統合環境（docker/docker-compose.yml）で起動する場合は、Nginx Gateway 経由で http://localhost/gift-tax-simulator/ からアクセスできます。

## プロジェクト構成

```
├── app/
│   ├── layout.tsx           # ルートレイアウト
│   ├── page.tsx             # シミュレーターページ
│   ├── globals.css          # グローバルスタイル
│   └── table/
│       └── page.tsx         # 早見表ページ
├── components/
│   ├── Header.tsx           # ヘッダー
│   ├── InputSection.tsx     # 入力フォーム
│   ├── ResultSection.tsx    # 結果表示
│   ├── TaxTable.tsx         # シミュレーター用テーブル
│   ├── TaxChart.tsx         # 棒グラフ
│   ├── QuickRefTable.tsx    # 早見表用テーブル
│   └── PrintFooter.tsx      # 印刷用フッター
├── lib/
│   ├── tax-calculation.ts   # 税額計算ロジック
│   └── utils.ts             # ユーティリティ関数
├── Dockerfile               # マルチステージビルド
├── docker-compose.yml       # 開発/本番環境設定
└── package.json
```

## 税額計算について

### 基礎控除
- **110万円**（暦年課税）

### 税率表
国税庁の速算表に基づいて計算しています。

#### 特例贈与
直系尊属（父母・祖父母など）から、贈与を受けた年の1月1日時点で18歳以上の者への贈与。

| 基礎控除後の課税価格 | 税率 | 控除額 |
|---------------------|------|--------|
| 200万円以下 | 10% | - |
| 400万円以下 | 15% | 10万円 |
| 600万円以下 | 20% | 30万円 |
| 1,000万円以下 | 30% | 90万円 |
| 1,500万円以下 | 40% | 190万円 |
| 3,000万円以下 | 45% | 265万円 |
| 4,500万円以下 | 50% | 415万円 |
| 4,500万円超 | 55% | 640万円 |

#### 一般贈与
特例贈与以外の贈与（兄弟間、夫婦間、親から未成年の子への贈与など）。

| 基礎控除後の課税価格 | 税率 | 控除額 |
|---------------------|------|--------|
| 200万円以下 | 10% | - |
| 300万円以下 | 15% | 10万円 |
| 400万円以下 | 20% | 25万円 |
| 600万円以下 | 30% | 65万円 |
| 1,000万円以下 | 40% | 125万円 |
| 1,500万円以下 | 45% | 175万円 |
| 3,000万円以下 | 50% | 250万円 |
| 3,000万円超 | 55% | 400万円 |

## Docker設定

### スタンドアロン（docker-compose.yml）
- ホットリロード対応
- ソースコードのバインドマウント(:ro)
- ヘルスチェック設定
- リソース制限（メモリ）

### 本番環境（中央 docker/docker-compose.prod.yml）
- マルチステージビルドによる軽量イメージ
- 非rootユーザーで実行
- ヘルスチェック設定
- リソース制限（メモリ）
- セキュリティオプション有効

## ライセンス

Private - 税理士法人マスエージェント
